<!-- Edit User Page -->
<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 mb-0 text-gray-800">Edit User: <%= userToEdit.username %></h1>
    <a href="/users" class="btn btn-secondary">
      <i class="fas fa-arrow-left"></i> Back to Users
    </a>
  </div>

  <div class="row">
    <div class="col-lg-8">
      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-primary">User Information</h6>
        </div>
        <div class="card-body">
          <% if (error) { %>
            <div class="alert alert-danger" role="alert">
              <%= error %>
            </div>
          <% } %>
          
          <form action="/users/update/<%= userToEdit.id %>" method="POST">
            <div class="mb-3">
              <label for="username" class="form-label">Username *</label>
              <input type="text" class="form-control" id="username" name="username" 
                     value="<%= userToEdit.username %>" required>
            </div>
            
            <div class="mb-3">
              <label for="email" class="form-label">Email *</label>
              <input type="email" class="form-control" id="email" name="email" 
                     value="<%= userToEdit.email %>" required>
            </div>
            
            <div class="mb-3">
              <label for="password" class="form-label">Password (leave blank to keep current)</label>
              <input type="password" class="form-control" id="password" name="password">
              <small class="form-text text-muted">Leave blank to keep the current password</small>
            </div>
            
            <div class="mb-3">
              <label for="fullName" class="form-label">Full Name</label>
              <input type="text" class="form-control" id="fullName" name="fullName" 
                     value="<%= userToEdit.full_name %>">
            </div>
            
            <div class="mb-3">
              <label for="role" class="form-label">Role</label>
              <select class="form-select" id="role" name="role">
                <option value="user" <%= userToEdit.role === 'user' ? 'selected' : '' %>>User</option>
                <option value="admin" <%= userToEdit.role === 'admin' ? 'selected' : '' %>>Admin</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label for="isActive" class="form-label">Status</label>
              <select class="form-select" id="isActive" name="isActive">
                <option value="true" <%= userToEdit.is_active ? 'selected' : '' %>>Active</option>
                <option value="false" <%= !userToEdit.is_active ? 'selected' : '' %>>Inactive</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label for="timezone" class="form-label">Timezone</label>
              <select class="form-select" id="timezone" name="timezone">
                <option value="UTC" <%= userToEdit.timezone === 'UTC' ? 'selected' : '' %>>UTC</option>
                <option value="America/New_York" <%= userToEdit.timezone === 'America/New_York' ? 'selected' : '' %>>Eastern Time (ET)</option>
                <option value="America/Chicago" <%= userToEdit.timezone === 'America/Chicago' ? 'selected' : '' %>>Central Time (CT)</option>
                <option value="America/Denver" <%= userToEdit.timezone === 'America/Denver' ? 'selected' : '' %>>Mountain Time (MT)</option>
                <option value="America/Los_Angeles" <%= userToEdit.timezone === 'America/Los_Angeles' ? 'selected' : '' %>>Pacific Time (PT)</option>
                <option value="Europe/London" <%= userToEdit.timezone === 'Europe/London' ? 'selected' : '' %>>London</option>
                <option value="Europe/Paris" <%= userToEdit.timezone === 'Europe/Paris' ? 'selected' : '' %>>Paris</option>
                <option value="Asia/Tokyo" <%= userToEdit.timezone === 'Asia/Tokyo' ? 'selected' : '' %>>Tokyo</option>
                <option value="Asia/Singapore" <%= userToEdit.timezone === 'Asia/Singapore' ? 'selected' : '' %>>Singapore</option>
                <option value="Australia/Sydney" <%= userToEdit.timezone === 'Australia/Sydney' ? 'selected' : '' %>>Sydney</option>
              </select>
            </div>
            
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Update User
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <div class="col-lg-4">
      <div class="card shadow mb-4">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-primary">Help</h6>
        </div>
        <div class="card-body">
          <p>Fields marked with * are required.</p>
          <p><strong>Username:</strong> Unique identifier for the user.</p>
          <p><strong>Email:</strong> User's email address for notifications.</p>
          <p><strong>Password:</strong> Leave blank to keep the current password.</p>
          <p><strong>Role:</strong> User role determines permissions.</p>
          <ul>
            <li><strong>User:</strong> Can manage their own websites.</li>
            <li><strong>Admin:</strong> Can manage all websites and users.</li>
          </ul>
          <p><strong>Status:</strong> Active users can log in, inactive users cannot.</p>
          <p><strong>Timezone:</strong> User's preferred timezone for displaying dates and times.</p>
        </div>
      </div>
    </div>
  </div>
</div> 